<div class="contact-card">
    <h2>Contact Sungroup Support</h2>
    <div id="contactSuccess" style="display:none; color:green; margin-bottom:15px;">âœ… Message sent! We'll get back to you shortly.</div>
    
    <form id="contactForm">
        <input type="text" id="cName" placeholder="Your Name" required>
        <input type="email" id="cEmail" placeholder="Your Email" required>
        <input type="text" id="cSubject" placeholder="Subject" required>
        <textarea id="cMessage" placeholder="How can we help you?" rows="5" required></textarea>
        <button type="submit" id="cBtn" class="btn-submit" style="background:#1e73be; color:white; padding:12px; width:100%; border:none; border-radius:5px; cursor:pointer;">Send Message</button>
    </form>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCkND2Ip7G09rELaU-S9c0LXk1ffrFSc4g",
        authDomain: "sungroup-crm.firebaseapp.com",
        projectId: "sungroup-crm",
        storageBucket: "sungroup-crm.firebasestorage.app",
        messagingSenderId: "982155471354",
        appId: "1:982155471354:web:c4b61192d247c9739edc43"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    document.getElementById('contactForm').onsubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('cBtn');
        btn.disabled = true;
        btn.innerText = "Sending...";

        try {
            // Using addDoc here because one person might send multiple messages
            await addDoc(collection(db, "inquiries"), {
                name: document.getElementById('cName').value,
                email: document.getElementById('cEmail').value,
                subject: document.getElementById('cSubject').value,
                message: document.getElementById('cMessage').value,
                timestamp: new Date().toISOString()
            });
            document.getElementById('contactForm').reset();
            document.getElementById('contactSuccess').style.display = "block";
            btn.innerText = "Send Message";
            btn.disabled = false;
        } catch (err) {
            alert("Error sending message. Please try again.");
            btn.disabled = false;
        }
    };
</script>
